@if (matchId) {
  <form
    tuiTextfieldSize="m"
    [formGroup]="eventForm"
    [tuiTextfieldLabelOutside]="true"
    style="padding: 10px"
  >
    @if (events && events.length && eventForm && eventsArray && eventsArray.length) {
      <div class="table">
        @if (events && events.length) {
          <div formArrayName="events" class="table-body">
            <div
              *ngFor="let eventFormGroup of eventsArray.controls; let i = index"
              class="table-row"
              [formGroupName]="i"
            >
              <div
                class="table-cell first"
              >
                @if (getFormDataByIndexAndKey(eventFormGroup, i, 'eventId')) {
                  @if (getFormDataByIndexAndKey(eventFormGroup, i, 'eventNumber'); as number) {
                    {{ number }}
                  }
                } @else {
                  <tui-input-number
                    [formControl]="getFormControl(
                        this.eventForm,
                        i,
                        'eventNumber',
                        'events'
                      )"
                  ></tui-input-number>
                }
              </div>
              @if (eventFormGroup.get("eventId" + i)!.value; as id) {
                <div class="table-cell">
                  <app-actions-buttons
                    [id]="id"
                    [index]="i"
                    [deleteOrUpdate]="'delete'"
                    [item]="
                            getFormDataByIndexAndKey(
                              eventFormGroup,
                              i,
                              'eventNumber'
                            )
                          "
                    (onSubmit)="
                            onCreateNewEvent($event.action, $event.index, $event.id)
                          "
                    (onCancel)="onCancelButtonClick()"

                  ></app-actions-buttons>
                </div>
              } @else {
                <div class="table-cell actions">
                  <app-actions-buttons
                    [index]="i"
                    (onSubmit)="onCreateNewEvent($event.action, $event.index, $event.id)"
                    (onCancel)="onCancelButtonClick()"
                  ></app-actions-buttons>
                </div>
              }
            </div>
          </div>
          @if (!events.length ||
          events[events.length - 1].id !== null) {
            <div class="table-row final">
              <app-add-button-on-final-tr
                [action]="'add event'"
                (onAdd)="addNewEvent()"
              ></app-add-button-on-final-tr>
            </div>
          }

        } @else {
          <div class="table-row final">
            <app-add-button-on-final-tr
              (onAdd)="addNewEvent()"
            ></app-add-button-on-final-tr>
          </div>
        }
      </div>
    } @else {
      NO EVENTS
      <div class="table-row final">
        <app-add-button-on-final-tr
          (onAdd)="addNewEvent()"
        ></app-add-button-on-final-tr>
      </div>
    }
  </form>
} @else {
  NO MATCH ID
}
