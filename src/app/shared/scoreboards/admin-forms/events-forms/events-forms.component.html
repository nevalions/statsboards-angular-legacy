<app-toggle-visible-button
  [isVisible$]="eventsFormsVisible$"
  [formName]="'eventsForms'"
  [buttonText]="'Events Forms'"
>
</app-toggle-visible-button>
<div
  *ngIf="eventsFormsVisible$ | async"
  class="event-forms"
>
  <div style="display: grid; grid-template-columns: 50% 50%">
    <div>
      <p class="tui-text_h6">{{ data?.teams_data?.team_a?.title | uppercase }} STATS</p>
      <p>Offence Yards: {{ offenceDistanceForTeamA$ | async }}</p>
      <p>Run Yards: {{ runDistanceForTeamA$ | async }}</p>
      <p>Pass Yards: {{ passDistanceForTeamA$ | async }}</p>
      <p>Flag Yards: {{ flagYardsTeamA$ | async }}</p>
      @if (allQuarterbacksTeamA$ | async; as qbs) {
        @for (qb of qbs; track qb.match_player.id) {
          <p>
            QB:
            #{{ qb.match_player.match_number }}
            {{ qb.person?.first_name | titlecase }}
            {{ qb.person?.second_name | titlecase }}
            (ATT:{{ qb.qb_stats?.passes }}/{{ qb.qb_stats?.passes_completed }} )
          </p>
        }
      }
    </div>
    <div>
      <p class="tui-text_h6">{{ data?.teams_data?.team_b?.title | uppercase }} STATS</p>
      <p>Offence Yards: {{ offenceDistanceForTeamB$ | async }}</p>
      <p>Run Yards: {{ runDistanceForTeamB$ | async }}</p>
      <p>Pass Yards: {{ passDistanceForTeamB$ | async }}</p>
      <p>Flag Yards: {{ flagYardsTeamB$ | async }}</p>
    </div>

  </div>
  <p>
    @if (data && data.match_id) {
      <form
        class="field-form"
        [formGroup]="fieldForm"
      >
        <tui-input-number
          class="field-form-input"
          formControlName="fieldLength"
        >FIELD LENGTH: EVEN NUMBERS ONLY
        </tui-input-number>
        <tui-error
          formControlName="fieldLength"
          [error]="[] | tuiFieldError | async"
        ></tui-error>
        <app-admin-submit-button
          [disabled]="disabled"
          (click)="updateFieldLength(data.match_data!)"
        ></app-admin-submit-button>
      </form>

      <app-add-edit-football-event-table
        [events]="events"
        [match]="data"
        [homePlayersInMatch]="homePlayersInMatch"
        [awayPlayersInMatch]="awayPlayersInMatch"
      ></app-add-edit-football-event-table>
    }
  </p>
</div>
